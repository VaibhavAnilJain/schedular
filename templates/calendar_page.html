<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.9.0/main.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.9.0/main.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css">
        <script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <script>


            document.addEventListener('DOMContentLoaded', function() {
              var calendarEl = document.getElementById('calendar');
              var eventss = [];

              var number = parseInt('{{n}}');
              console.log(typeof number);

              myvar = '{{events|tojson}}';
           
              var parsed = JSON.parse(myvar);
              console.log(parsed);
              

              for(var i =0; i < number; i++) 
                {eventss.push( {title: parsed[i].title, start: parsed[i].Start })}
              
              console.log(eventss);

              


              var calendar = new FullCalendar.Calendar(calendarEl, {
                height: 650,
                initialView: 'dayGridMonth',
                initialDate: '2021-07-07',
                selectable: true,
                headerToolbar: {
                  left: 'prev,next today',
                  center: 'title',
                  right: 'dayGridMonth,timeGridWeek,timeGridDay'
                },
                dateClick: function(info){
                  $("#myModalLabel").text("Add Events to "+info.dateStr); 
                  $("#exampleModalCenter").modal('show');
                  // alert(info.dateStr);
                  // arr=info.dateStr;
                  // $.ajax
                  // ({
                  //     url:'/calendarPage',
                  //     type:'POST',
                  //     data:{'date':info.dateStr},
                  //     success:function(response){
                  //        console.log(response); 
                  //     },
                  //     error: function(error){
                  //       console.log(error);
                  //     }
                  // })
                // },
                // select: function(info) {
                // alert('selected ' + info.startStr + ' to ' + info.endStr);
      },
                events:eventss
                //   {
                //     groupId: '999',
                //     title: 'Repeating Event',
                //     start: '2021-07-09T16:00:00'
                //   },
                //   {
                //     groupId: '999',
                //     title: 'Repeating Event',
                //     start: '2021-07-16T16:00:00'
                //   },
                //   {
                //     title: 'Conference',
                //     start: '2021-07-11',
                //     end: '2021-07-13'
                //   },
                //   {
                //     title: 'Meeting',
                //     start: '2021-07-12T10:30:00',
                //     end: '2021-07-12T12:30:00'
                //   },
                //   {
                //     title: 'Lunch',
                //     start: '2021-07-12T12:00:00'
                //   },
                //   {
                //     title: 'Meeting',
                //     start: '2021-07-12T14:30:00'
                //   },
                //   {
                //     title: 'Birthday Party',
                //     start: '2021-07-13T07:00:00'
                //   },
                //   {
                //     title: 'Click for Google',
                //     url: 'http://google.com/',
                //     start: '2021-07-28'
                //   }
                // ]
              });
          
              calendar.render();
            });
          // Time Picker Initialization
            // $('#input_starttime').pickatime({});
          </script>
    </head>
    <body>
      <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel">Add Event to </h4>
                </div>
                <form method="post" action="/getdata">
                    <div class="modal-body">
                        <div class="form-group">
                            <input class="form-control business_skill_id" type="hidden" name="id">
                            <input class="form-control business_skill_name" name="name" placeholder="Enter the Event" required>
                        </div>
                        <div class="form-group">
                            <input class="form-control business_skill_content" type="hidden" name="content">
                            <!-- <label for="heading">Enter program details</label> -->
                            <textarea class="form-control" id="business_skill_content"  name="content1"  placeholder="Enter the Description" rows="4" cols="50" ></textarea>
                        </div>
                      
                        <div class="radio">
                          Type of Events &nbsp;&nbsp;&nbsp;
                          <label class="radio-inline"><input type="radio" name="optradio" value="Indoor">Indoor</label>
                          <label class="radio-inline"><input type="radio" name="optradio" value="Outdoor">Outdoor</label>
                        </div>
                     
                        Enter start time &nbsp;&nbsp;&nbsp;&nbsp;
                          <div class="row">
                             <div class='col-sm-6'>
                                <div class="form-group">
                                   <div class='input-group date' id='datetimepicker3'>
                                      <input type='text' class="form-control" name="stTime">
                                      <span class="input-group-addon">
                                      <span class="glyphicon glyphicon-time"></span>
                                      </span>
                                   </div>
                                </div>
                             </div>
                             <!-- <script type="text/javascript">
                                $(function () {
                                    $('#datetimepicker3').datetimepicker({
                                        format: 'LT'
                                    });
                                });
                             </script> -->
                          </div>
                        Enter end time &nbsp;&nbsp;&nbsp;&nbsp;
                          <div class="row">
                            <div class='col-sm-6'>
                               <div class="form-group">
                                  <div class='input-group date' id='datetimepicker3'>
                                     <input type='text' class="form-control" name="endTime" >
                                     <span class="input-group-addon">
                                     <span class="glyphicon glyphicon-time"></span>
                                     </span>
                                  </div>
                               </div>
                            </div>
                            <!-- <script type="text/javascript">
                               $(function () {
                                   $('#datetimepicker3').datetimepicker({
                                       format: 'LT'
                                   });
                               });
                            </script> -->
                         </div>
                    <div class="modal-footer">
                    
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Save changes</button>
                    </div>
                  </div>
                </form>
            </div>
        </div>
    </div>
        
        <h1> Welcome!'{{n}}'</h1>
        <div id="calendar" style="width:80%;height:70%"></div>
        
    </body>
</html>